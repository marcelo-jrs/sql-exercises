/* ============================================================
   MODELAGEM (ORACLE) — CONCESSIONÁRIA (CARROS NACIONAIS/IMPORTADOS)
   - 9 tabelas relacionadas
   - 10 INSERTS por tabela
   ============================================================ */

/* =========================
   1) DDL — TABELAS
   ========================= */

-- PAÍS
CREATE TABLE TB_PAIS (
  COD_PAIS    NUMBER(4)        CONSTRAINT PK_TB_PAIS PRIMARY KEY,
  NOME_PAIS   VARCHAR2(60)     NOT NULL,
  SIGLA_PAIS  CHAR(2)          NOT NULL,
  CONSTRAINT UK_TB_PAIS_SIGLA UNIQUE (SIGLA_PAIS)
);

-- FABRICANTE
CREATE TABLE TB_FABRICANTE (
  COD_FABRICANTE   NUMBER(6)      CONSTRAINT PK_TB_FABRICANTE PRIMARY KEY,
  NOME_FABRICANTE  VARCHAR2(80)   NOT NULL,
  COD_PAIS_SEDE    NUMBER(4)      NOT NULL,
  CONSTRAINT UK_TB_FABRICANTE_NOME UNIQUE (NOME_FABRICANTE),
  CONSTRAINT FK_FABRICANTE_PAIS FOREIGN KEY (COD_PAIS_SEDE)
    REFERENCES TB_PAIS (COD_PAIS)
);

-- MODELO (define se é nacional/importado via país de produção)
CREATE TABLE TB_MODELO (
  COD_MODELO          NUMBER(8)     CONSTRAINT PK_TB_MODELO PRIMARY KEY,
  NOME_MODELO         VARCHAR2(80)  NOT NULL,
  COD_FABRICANTE      NUMBER(6)     NOT NULL,
  COD_PAIS_PRODUCAO   NUMBER(4)     NOT NULL,
  SEGMENTO            VARCHAR2(30)  NOT NULL,
  TIPO_COMBUSTIVEL    VARCHAR2(20)  NOT NULL,
  ANO_INICIO          NUMBER(4)     NOT NULL,
  FL_NACIONAL         CHAR(1)       NOT NULL,
  CONSTRAINT CK_TB_MODELO_FLN CHECK (FL_NACIONAL IN ('S','N')),
  CONSTRAINT FK_MODELO_FABRICANTE FOREIGN KEY (COD_FABRICANTE)
    REFERENCES TB_FABRICANTE (COD_FABRICANTE),
  CONSTRAINT FK_MODELO_PAIS_PROD FOREIGN KEY (COD_PAIS_PRODUCAO)
    REFERENCES TB_PAIS (COD_PAIS)
);

-- LOJA (filiais)
CREATE TABLE TB_LOJA (
  COD_LOJA   NUMBER(6)       CONSTRAINT PK_TB_LOJA PRIMARY KEY,
  NOME_LOJA  VARCHAR2(80)    NOT NULL,
  CIDADE     VARCHAR2(60)    NOT NULL,
  ESTADO     CHAR(2)         NOT NULL,
  CNPJ       CHAR(14)        NOT NULL,
  CONSTRAINT UK_TB_LOJA_CNPJ UNIQUE (CNPJ)
);

-- VENDEDOR
CREATE TABLE TB_VENDEDOR (
  COD_VENDEDOR    NUMBER(6)      CONSTRAINT PK_TB_VENDEDOR PRIMARY KEY,
  NOME_VENDEDOR   VARCHAR2(80)   NOT NULL,
  EMAIL           VARCHAR2(120)  NOT NULL,
  TELEFONE        VARCHAR2(20)   NOT NULL,
  COD_LOJA        NUMBER(6)      NOT NULL,
  DT_ADMISSAO     DATE           NOT NULL,
  COMISSAO_PCT    NUMBER(5,2)    NOT NULL,
  CONSTRAINT UK_TB_VENDEDOR_EMAIL UNIQUE (EMAIL),
  CONSTRAINT FK_VENDEDOR_LOJA FOREIGN KEY (COD_LOJA)
    REFERENCES TB_LOJA (COD_LOJA),
  CONSTRAINT CK_TB_VENDEDOR_COMIS CHECK (COMISSAO_PCT BETWEEN 0 AND 20)
);

-- CLIENTE
CREATE TABLE TB_CLIENTE (
  COD_CLIENTE   NUMBER(8)      CONSTRAINT PK_TB_CLIENTE PRIMARY KEY,
  NOME_CLIENTE  VARCHAR2(80)   NOT NULL,
  CPF           CHAR(11)       NOT NULL,
  EMAIL         VARCHAR2(120)  NOT NULL,
  TELEFONE      VARCHAR2(20)   NOT NULL,
  CIDADE        VARCHAR2(60)   NOT NULL,
  ESTADO        CHAR(2)        NOT NULL,
  DT_CADASTRO   DATE           NOT NULL,
  CONSTRAINT UK_TB_CLIENTE_CPF UNIQUE (CPF),
  CONSTRAINT UK_TB_CLIENTE_EMAIL UNIQUE (EMAIL)
);

-- CARRO (unidade física em estoque / vendido)
CREATE TABLE TB_CARRO (
  COD_CARRO        NUMBER(10)     CONSTRAINT PK_TB_CARRO PRIMARY KEY,
  VIN              VARCHAR2(17)   NOT NULL,
  COD_MODELO       NUMBER(8)      NOT NULL,
  ANO_FABRICACAO   NUMBER(4)      NOT NULL,
  KM              NUMBER(10)     NOT NULL,
  PRECO_TABELA     NUMBER(12,2)   NOT NULL,
  STATUS           VARCHAR2(20)   NOT NULL,
  COD_LOJA         NUMBER(6)      NOT NULL,
  CONSTRAINT UK_TB_CARRO_VIN UNIQUE (VIN),
  CONSTRAINT FK_CARRO_MODELO FOREIGN KEY (COD_MODELO)
    REFERENCES TB_MODELO (COD_MODELO),
  CONSTRAINT FK_CARRO_LOJA FOREIGN KEY (COD_LOJA)
    REFERENCES TB_LOJA (COD_LOJA),
  CONSTRAINT CK_TB_CARRO_STATUS CHECK (STATUS IN ('EM_ESTOQUE','RESERVADO','VENDIDO')),
  CONSTRAINT CK_TB_CARRO_ANO CHECK (ANO_FABRICACAO BETWEEN 1980 AND 2100),
  CONSTRAINT CK_TB_CARRO_KM CHECK (KM >= 0),
  CONSTRAINT CK_TB_CARRO_PRECO CHECK (PRECO_TABELA >= 0)
);

-- VENDA (cabeçalho)
CREATE TABLE TB_VENDA (
  COD_VENDA     NUMBER(10)     CONSTRAINT PK_TB_VENDA PRIMARY KEY,
  COD_LOJA      NUMBER(6)      NOT NULL,
  COD_VENDEDOR  NUMBER(6)      NOT NULL,
  COD_CLIENTE   NUMBER(8)      NOT NULL,
  DT_VENDA      DATE           NOT NULL,
  FORMA_PAGTO   VARCHAR2(20)   NOT NULL,
  TOTAL_VENDA   NUMBER(12,2)   NOT NULL,
  CONSTRAINT FK_VENDA_LOJA FOREIGN KEY (COD_LOJA)
    REFERENCES TB_LOJA (COD_LOJA),
  CONSTRAINT FK_VENDA_VENDEDOR FOREIGN KEY (COD_VENDEDOR)
    REFERENCES TB_VENDEDOR (COD_VENDEDOR),
  CONSTRAINT FK_VENDA_CLIENTE FOREIGN KEY (COD_CLIENTE)
    REFERENCES TB_CLIENTE (COD_CLIENTE),
  CONSTRAINT CK_TB_VENDA_PAGTO CHECK (FORMA_PAGTO IN ('PIX','CARTAO','BOLETO','FINANCIAMENTO','TED')),
  CONSTRAINT CK_TB_VENDA_TOTAL CHECK (TOTAL_VENDA >= 0)
);

-- VENDA_ITEM (itens da venda; aqui 1 carro por item)
CREATE TABLE TB_VENDA_ITEM (
  COD_ITEM     NUMBER(10)     CONSTRAINT PK_TB_VENDA_ITEM PRIMARY KEY,
  COD_VENDA    NUMBER(10)     NOT NULL,
  COD_CARRO    NUMBER(10)     NOT NULL,
  PRECO_VENDA  NUMBER(12,2)   NOT NULL,
  DESCONTO     NUMBER(12,2)   NOT NULL,
  IMPOSTO      NUMBER(12,2)   NOT NULL,
  TOTAL_ITEM   NUMBER(12,2)   NOT NULL,
  CONSTRAINT FK_ITEM_VENDA FOREIGN KEY (COD_VENDA)
    REFERENCES TB_VENDA (COD_VENDA),
  CONSTRAINT FK_ITEM_CARRO FOREIGN KEY (COD_CARRO)
    REFERENCES TB_CARRO (COD_CARRO),
  CONSTRAINT UK_ITEM_CARRO_UNICO UNIQUE (COD_CARRO),
  CONSTRAINT CK_ITEM_VALORES CHECK (
    PRECO_VENDA >= 0 AND DESCONTO >= 0 AND IMPOSTO >= 0 AND TOTAL_ITEM >= 0
  )
);

/* =========================
   2) DML — INSERTS (10 por tabela)
   ========================= */

-- TB_PAIS (10)
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (1,  'Brasil',        'BR');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (2,  'Estados Unidos','US');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (3,  'Alemanha',      'DE');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (4,  'Japao',         'JP');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (5,  'Italia',        'IT');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (6,  'Franca',        'FR');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (7,  'China',         'CN');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (8,  'Coreia do Sul', 'KR');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (9,  'Reino Unido',   'GB');
INSERT INTO TB_PAIS (COD_PAIS, NOME_PAIS, SIGLA_PAIS) VALUES (10, 'Suecia',        'SE');

-- TB_FABRICANTE (10)
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (1,  'Volkswagen', 3);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (2,  'Toyota',     4);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (3,  'Ford',       2);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (4,  'Fiat',       5);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (5,  'Renault',    6);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (6,  'Hyundai',    8);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (7,  'Chery',      7);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (8,  'Chevrolet',  2);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (9,  'BMW',        3);
INSERT INTO TB_FABRICANTE (COD_FABRICANTE, NOME_FABRICANTE, COD_PAIS_SEDE) VALUES (10, 'Volvo',      10);

-- TB_MODELO (10)
-- Regra do FL_NACIONAL: 'S' quando COD_PAIS_PRODUCAO = 1 (BR); caso contrário 'N'
INSERT INTO TB_MODELO VALUES (101, 'Onix 1.0 Turbo',      8, 1,  'Hatch',     'Flex',      2019, 'S');
INSERT INTO TB_MODELO VALUES (102, 'Corolla 2.0',         2, 1,  'Sedan',     'Flex',      2014, 'S');
INSERT INTO TB_MODELO VALUES (103, 'T-Cross 1.4 TSI',     1, 1,  'SUV',       'Flex',      2019, 'S');
INSERT INTO TB_MODELO VALUES (104, 'Compass 2.0',         4, 1,  'SUV',       'Flex',      2017, 'S');
INSERT INTO TB_MODELO VALUES (105, 'Kwid 1.0',            5, 1,  'Hatch',     'Flex',      2017, 'S');
INSERT INTO TB_MODELO VALUES (106, 'BMW 320i',            9, 3,  'Sedan',     'Gasolina',  2019, 'N');
INSERT INTO TB_MODELO VALUES (107, 'Volvo XC60',          10,10, 'SUV',       'Hibrido',   2018, 'N');
INSERT INTO TB_MODELO VALUES (108, 'Toyota RAV4',         2, 4,  'SUV',       'Hibrido',   2019, 'N');
INSERT INTO TB_MODELO VALUES (109, 'Hyundai Ioniq 5',     6, 8,  'SUV',       'Eletrico',  2021, 'N');
INSERT INTO TB_MODELO VALUES (110, 'Chery Tiggo 8',       7, 7,  'SUV',       'Gasolina',  2020, 'N');

-- TB_LOJA (10)
INSERT INTO TB_LOJA VALUES (1,  'AutoPrime Floripa',   'Florianopolis', 'SC', '11111111000101');
INSERT INTO TB_LOJA VALUES (2,  'AutoPrime Sao Paulo', 'Sao Paulo',     'SP', '11111111000102');
INSERT INTO TB_LOJA VALUES (3,  'AutoPrime Rio',       'Rio de Janeiro','RJ', '11111111000103');
INSERT INTO TB_LOJA VALUES (4,  'AutoPrime Curitiba',  'Curitiba',      'PR', '11111111000104');
INSERT INTO TB_LOJA VALUES (5,  'AutoPrime BH',        'Belo Horizonte','MG', '11111111000105');
INSERT INTO TB_LOJA VALUES (6,  'AutoPrime Brasilia',  'Brasilia',      'DF', '11111111000106');
INSERT INTO TB_LOJA VALUES (7,  'AutoPrime Salvador',  'Salvador',      'BA', '11111111000107');
INSERT INTO TB_LOJA VALUES (8,  'AutoPrime Recife',    'Recife',        'PE', '11111111000108');
INSERT INTO TB_LOJA VALUES (9,  'AutoPrime Goiania',   'Goiania',       'GO', '11111111000109');
INSERT INTO TB_LOJA VALUES (10, 'AutoPrime Porto',     'Porto Alegre',  'RS', '11111111000110');

-- TB_VENDEDOR (10)
INSERT INTO TB_VENDEDOR VALUES (1,  'Ana Souza',     'ana.souza@autoprime.com',     '+55 48 90000-0001', 1,  '2023-02-10', 2.50);
INSERT INTO TB_VENDEDOR VALUES (2,  'Bruno Lima',    'bruno.lima@autoprime.com',    '+55 11 90000-0002', 2,  '2022-08-15', 2.80);
INSERT INTO TB_VENDEDOR VALUES (3,  'Carla Mendes',  'carla.mendes@autoprime.com',  '+55 21 90000-0003', 3,  '2021-05-20', 3.10);
INSERT INTO TB_VENDEDOR VALUES (4,  'Diego Alves',   'diego.alves@autoprime.com',   '+55 41 90000-0004', 4,  '2020-03-12', 2.40);
INSERT INTO TB_VENDEDOR VALUES (5,  'Eduarda Reis',  'eduarda.reis@autoprime.com',  '+55 31 90000-0005', 5,  '2022-11-01', 2.90);
INSERT INTO TB_VENDEDOR VALUES (6,  'Fabio Santos',  'fabio.santos@autoprime.com',  '+55 61 90000-0006', 6,  '2019-07-07', 3.50);
INSERT INTO TB_VENDEDOR VALUES (7,  'Gabi Rocha',    'gabi.rocha@autoprime.com',    '+55 71 90000-0007', 7,  '2023-01-05', 2.20);
INSERT INTO TB_VENDEDOR VALUES (8,  'Henrique Barros', 'henrique.barros@autoprime.com', '+55 81 90000-0008', 8, '2021-09-09', 2.70);
INSERT INTO TB_VENDEDOR VALUES (9,  'Isabela Costa', 'isabela.costa@autoprime.com', '+55 62 90000-0009', 9,  '2020-12-18', 3.00);
INSERT INTO TB_VENDEDOR VALUES (10, 'Joao Pereira',  'joao.pereira@autoprime.com',  '+55 51 90000-0010', 10, '2018-04-02', 3.80);

-- TB_CLIENTE (10)
INSERT INTO TB_CLIENTE VALUES (1,  'Marcos Silva',    '12345678901', 'marcos.silva@email.com',    '+55 48 98888-0001', 'Florianopolis', 'SC', '2025-01-10');
INSERT INTO TB_CLIENTE VALUES (2,  'Patricia Nunes',  '12345678902', 'patricia.nunes@email.com',  '+55 11 98888-0002', 'Sao Paulo',     'SP', '2025-01-12');
INSERT INTO TB_CLIENTE VALUES (3,  'Rafael Oliveira', '12345678903', 'rafael.oliveira@email.com', '+55 21 98888-0003', 'Rio de Janeiro','RJ', '2025-01-15');
INSERT INTO TB_CLIENTE VALUES (4,  'Juliana Castro',  '12345678904', 'juliana.castro@email.com',  '+55 41 98888-0004', 'Curitiba',      'PR', '2025-01-18');
INSERT INTO TB_CLIENTE VALUES (5,  'Thiago Martins',  '12345678905', 'thiago.martins@email.com',  '+55 31 98888-0005', 'Belo Horizonte','MG', '2025-01-20');
INSERT INTO TB_CLIENTE VALUES (6,  'Fernanda Lopes',  '12345678906', 'fernanda.lopes@email.com',  '+55 61 98888-0006', 'Brasilia',      'DF', '2025-01-22');
INSERT INTO TB_CLIENTE VALUES (7,  'Gustavo Araújo',  '12345678907', 'gustavo.araujo@email.com',  '+55 71 98888-0007', 'Salvador',      'BA', '2025-01-25');
INSERT INTO TB_CLIENTE VALUES (8,  'Camila Freitas',  '12345678908', 'camila.freitas@email.com',  '+55 81 98888-0008', 'Recife',        'PE', '2025-01-28');
INSERT INTO TB_CLIENTE VALUES (9,  'Leonardo Ribeiro','12345678909', 'leonardo.ribeiro@email.com','+55 62 98888-0009', 'Goiania',       'GO', '2025-02-01');
INSERT INTO TB_CLIENTE VALUES (10, 'Aline Teixeira',  '12345678910', 'aline.teixeira@email.com',  '+55 51 98888-0010', 'Porto Alegre',  'RS', '2025-02-03');

-- TB_CARRO (10) — 10 unidades (uma por modelo), alocadas por loja
INSERT INTO TB_CARRO VALUES (1,  '9BWZZZ377VT000001', 101, 2024,  12000,  95000.00,  'VENDIDO', 1);
INSERT INTO TB_CARRO VALUES (2,  '9BWZZZ377VT000002', 102, 2024,   8000, 135000.00,  'VENDIDO', 2);
INSERT INTO TB_CARRO VALUES (3,  '9BWZZZ377VT000003', 103, 2025,   1500, 210000.00,  'VENDIDO', 3);
INSERT INTO TB_CARRO VALUES (4,  '9BWZZZ377VT000004', 104, 2024,   9000, 125000.00,  'VENDIDO', 4);
INSERT INTO TB_CARRO VALUES (5,  '9BWZZZ377VT000005', 105, 2023,  18000,  98000.00,  'VENDIDO', 5);
INSERT INTO TB_CARRO VALUES (6,  '9BWZZZ377VT000006', 106, 2022,  22000, 320000.00,  'VENDIDO', 6);
INSERT INTO TB_CARRO VALUES (7,  '9BWZZZ377VT000007', 107, 2023,  11000, 160000.00,  'VENDIDO', 7);
INSERT INTO TB_CARRO VALUES (8,  '9BWZZZ377VT000008', 108, 2023,   7000, 145000.00,  'VENDIDO', 8);
INSERT INTO TB_CARRO VALUES (9,  '9BWZZZ377VT000009', 109, 2024,   3000, 275000.00,  'VENDIDO', 9);
INSERT INTO TB_CARRO VALUES (10, '9BWZZZ377VT000010', 110, 2024,   6000, 115000.00,  'VENDIDO', 10);

-- TB_VENDA (10)
INSERT INTO TB_VENDA VALUES (1,  1,  1,  1,  '2025-02-05', 'PIX',          90200.00);
INSERT INTO TB_VENDA VALUES (2,  2,  2,  2,  '2025-02-06', 'CARTAO',      131800.00);
INSERT INTO TB_VENDA VALUES (3,  3,  3,  3,  '2025-02-07', 'FINANCIAMENTO',202500.00);
INSERT INTO TB_VENDA VALUES (4,  4,  4,  4,  '2025-02-08', 'TED',         122600.00);
INSERT INTO TB_VENDA VALUES (5,  5,  5,  5,  '2025-02-09', 'PIX',          97100.00);
INSERT INTO TB_VENDA VALUES (6,  6,  6,  6,  '2025-02-10', 'FINANCIAMENTO',308800.00);
INSERT INTO TB_VENDA VALUES (7,  7,  7,  7,  '2025-02-11', 'CARTAO',      156000.00);
INSERT INTO TB_VENDA VALUES (8,  8,  8,  8,  '2025-02-12', 'BOLETO',      139900.00);
INSERT INTO TB_VENDA VALUES (9,  9,  9,  9,  '2025-02-13', 'TED',         266300.00);
INSERT INTO TB_VENDA VALUES (10, 10, 10, 10, '2025-02-14', 'PIX',          113500.00);

-- TB_VENDA_ITEM (10) — 1 carro por venda (10 itens)
INSERT INTO TB_VENDA_ITEM VALUES (1,  1,  1,   92000.00,  3000.00, 1200.00,  90200.00);
INSERT INTO TB_VENDA_ITEM VALUES (2,  2,  2,  135000.00,  5000.00, 1800.00, 131800.00);
INSERT INTO TB_VENDA_ITEM VALUES (3,  3,  3,  210000.00, 10000.00, 2500.00, 202500.00);
INSERT INTO TB_VENDA_ITEM VALUES (4,  4,  4,  125000.00,  4000.00, 1600.00, 122600.00);
INSERT INTO TB_VENDA_ITEM VALUES (5,  5,  5,   98000.00,  2000.00, 1100.00,  97100.00);
INSERT INTO TB_VENDA_ITEM VALUES (6,  6,  6,  320000.00, 15000.00, 3800.00, 308800.00);
INSERT INTO TB_VENDA_ITEM VALUES (7,  7,  7,  160000.00,  6000.00, 2000.00, 156000.00);
INSERT INTO TB_VENDA_ITEM VALUES (8,  8,  8,  145000.00,  7000.00, 1900.00, 139900.00);
INSERT INTO TB_VENDA_ITEM VALUES (9,  9,  9,  275000.00, 12000.00, 3300.00, 266300.00);
INSERT INTO TB_VENDA_ITEM VALUES (10, 10, 10, 115000.00,  3000.00, 1500.00, 113500.00);

